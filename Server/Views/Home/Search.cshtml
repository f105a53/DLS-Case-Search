@using Humanizer;
@model Common.Models.SearchResults<Email>

@{
    ViewData["Title"] = "Search Result";
}

<h1>Search (@Model.Results.Count results)</h1>

<style>
    .result-container {
        padding: 5px;
        border-radius: 5px;
        background-color: rgba(0, 0, 0, 0.10);
        box-shadow: 0px 2px 10px 0px rgba(0,0,0,0.35);
        transition: 0.3s;
    }

    .result-container:hover {
        box-shadow: 0px 2px 15px 0px rgba(0,0,0,0.50);
    }
</style>

<div class="container-fluid">
    @foreach (var (score, email) in Model.Results)
    {
        <!-- Entire "card" -->
        <div class="row result-container">
            <div class="col-md-12">
                <!-- Subject/To/From row -->
                <div class="row">
                    <div class="col-md-8">
                        <h2 class="text-truncate" style="margin: 0px; padding: 0px;">
                            @email.Subject
                        </h2>
                    </div>
                    <div class="col-md-4">
                        <!-- to/from -->
                        <div class="row">
                            <div class="col-md-12" style="display: flex; padding: 0px; margin: 0px;">
                                <p style="padding: 0px; margin: 0px;">
                                    From: @email.From.Humanize()
                                </p>
                            </div>
                            <div class="col-md-12" style="display: flex; padding: 0px; margin: 0px;">
                                <p style="padding: 0px; margin: 0px;">
                                    To: @email.To.Humanize()
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Path/Date row -->
                <div class="row">
                    <!-- Path col -->
                    <div class="col-md-8" style="padding-top: 0px; padding-bottom: 0px; margin: 0px;">
                        <p style="padding-top: 0px; padding-bottom: 0px; margin: 0px; font-style: italic;">
                            @email.Path
                        </p>
                    </div>
                    <!-- Date col -->
                    <div class="col-md-4" style="padding: 0px; margin: 0px;">
                        <p style="padding: 0px; margin: 0px;">
                            Date: @email.Date.Humanize(null, null)
                        </p>
                    </div>
                </div>

                <hr />
                <!-- Body preview row -->
                <div class="row">
                    <div class="col-md-12" style="display: block;">
                        <p>
                            @email.Body
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <br />
    }
</div>

<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

<script>
    $(document).ready(function () {
        $('#searchResult').DataTable();
    });
</script>